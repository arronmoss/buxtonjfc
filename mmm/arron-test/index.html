<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- V2 -->
<script type="text/javascript">
  google.charts.load("current", {packages:["timeline"]});
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {

    var container = document.getElementById('example3.1');
    var chart = new google.visualization.Timeline(container);
    var dataTable = new google.visualization.DataTable();
    dataTable.addColumn({ type: 'string', id: 'Website' });
    dataTable.addColumn({ type: 'string', id: 'Version' });
    dataTable.addColumn({ type: 'date', id: 'Start' });
    dataTable.addColumn({ type: 'date', id: 'End' });


  var diddly = $.getJSON("https://script.google.com/macros/s/AKfycbw7rz7Q9d25GFl8vwD8DG9evDApM2WalAIklsaHlH3GfB_eqwjW/exec");
  var jsonData = diddly['responseJSON'];

  var arrayURLs = [];
  var testUrl = "https://script.google.com/a/zero1.co.uk/macros/s/AKfycbx_nqLHyaCjB4ndyuDb6xbjFgDwR-QDqAdUHKzWDeXe/dev";
  var liveUrl = "https://script.google.com/macros/s/AKfycbw7rz7Q9d25GFl8vwD8DG9evDApM2WalAIklsaHlH3GfB_eqwjW/exec";

      $.getJSON( liveUrl , function( data ) {
          var items = [];
          $.each( data, function( key, val ) {
              //console.log( val[0] );
              var start=new Date(val[2]);
              if(!val[3])
                  var end=new Date();
              else
                  var end=new Date(val[3]);

              console.log(val[0]);
              console.log(val[2]);
              console.log(val[3]);

              if(val[1] && val[2] && val[3]) {
                  dataTable.addRows([
                      [ val[0], 'Deployment '+val[1], new Date(start.getYear(), start.getMonth(), start.getDate()), new Date(end.getYear(), end.getMonth(), end.getDate()) ]
                  ]);
              }

          });

          chart.draw(dataTable);
      });
  }





function success(data,status,xhr) {
	console.log(data);
	console.log(status);
	console.log(xhr);


	
}

</script>
</head>
<body>
<div id="example3.1" style="height: 900px;"></div>

</body>
</html>
