<!doctype html><html lang="en">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PMJ3GGG');</script>
    <!-- End Google Tag Manager -->
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <link href="/mmm/styles.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript">

      google.charts.load('current', {'packages':['table']});
      google.charts.setOnLoadCallback(drawFixtures);
      google.charts.setOnLoadCallback(drawTableA);
      //google.charts.setOnLoadCallback(drawTableB);
      //google.charts.setOnLoadCallback(drawTableFinals);
	    
      var allGamesPlayed = true;
	    
	    
      function drawTableFinals() {
          var liveUrl = "https://script.google.com/macros/s/AKfycbx4uriTLlVllJfZG0TMXTww1T90JqQJyV1D2C7QbvoMWT29KJk/exec?table=Mini-Finals";
          var table = new google.visualization.Table(document.getElementById('table_finals'));
          var dataTable = new google.visualization.DataTable();
          dataTable.addColumn('string', 'Team');
          dataTable.addColumn('number', 'Score');
          dataTable.addColumn('number', 'Score');
          dataTable.addColumn('string', 'Team');

          var leagueTable = [];
          $.getJSON( liveUrl , function( data ) {
              $.each( data, function( key, team ) {
                  leagueTable.push( team );
              });
              dataTable.addRows(leagueTable);
              table.draw(dataTable, {showRowNumber: false, width: '100%', height: '50%'});
          });
      }    
	    
	   
	    
	function drawFixtures() {
          var liveUrl = "https://script.google.com/macros/s/AKfycbx4uriTLlVllJfZG0TMXTww1T90JqQJyV1D2C7QbvoMWT29KJk/exec?table=Fixtures&agegroup=Mini";
          var table = new google.visualization.Table(document.getElementById('table_fixtures'));
          var dataTable = new google.visualization.DataTable();
          dataTable.addColumn('string', 'Time');
          dataTable.addColumn('string', 'Group');
          dataTable.addColumn('string', 'Pitch');
		  dataTable.addColumn('string', 'Home');
		  dataTable.addColumn('string', '');
		  dataTable.addColumn('string', 'Away');
		  dataTable.addColumn('string', '');

          var leagueTable = [];
          $.getJSON( liveUrl , function( data ) {
              $.each( data, function( key, team ) {
				  console.log('ID TEAMS');
				  console.log(typeof team[0]);
				  console.log( team[0]);
				  console.log(typeof team[1]);
				  console.log( team[1]);
				  console.log(typeof team[2]);
				  console.log( team[2]);
				  console.log(typeof team[3]);
				  console.log( team[3]);
				  console.log(typeof team[5]);
				  console.log( team[5]);



                  leagueTable.push( team );
              });
              dataTable.addRows(leagueTable);
              table.draw(dataTable, {showRowNumber: false, width: '100%', height: '50%'});
          });
      }
	    
	    
	    
	    
	    
	        
	    
	    
      function drawTableA() {
          var liveUrl = "https://script.google.com/macros/s/AKfycbx4uriTLlVllJfZG0TMXTww1T90JqQJyV1D2C7QbvoMWT29KJk/exec?table=Table-Mini-A";
          var table = new google.visualization.Table(document.getElementById('table_div'));
          var dataTable = new google.visualization.DataTable();
          dataTable.addColumn('string', 'Team');
          dataTable.addColumn('number', 'MP');
          dataTable.addColumn('number', 'GF');
          dataTable.addColumn('number', 'GA');
          dataTable.addColumn('number', 'GD');
          dataTable.addColumn('number', 'Pts');

          var leagueTable = [];
          $.getJSON( liveUrl , function( data ) {
              $.each( data, function( key, team ) {
                  //console.log("we should be putting data into table");
		  console.log('Matches Played');
		  if(typeof team[1] != 'number') {
			  team[1] = 0;team[2] = 0;team[3] = 0;team[4] = 0;team[5] = 0;
			  
		  }

		  // need to check if games played NOT 4, then hide Finals table
		  if(team[1]<4) allGamesPlayed = false;
                  leagueTable.push( team );
              });
              dataTable.addRows(leagueTable);
              table.draw(dataTable, {showRowNumber: false, width: '100%', height: '50%'});
          });
      }

      function drawTableB() {
          var liveUrl = "https://script.google.com/macros/s/AKfycbx4uriTLlVllJfZG0TMXTww1T90JqQJyV1D2C7QbvoMWT29KJk/exec?table=Table-Mini-B";
          var table = new google.visualization.Table(document.getElementById('table_div_b'));
          var dataTable = new google.visualization.DataTable();
          dataTable.addColumn('string', 'Team');
          dataTable.addColumn('number', 'MP');
          dataTable.addColumn('number', 'GF');
          dataTable.addColumn('number', 'GA');
          dataTable.addColumn('number', 'GD');
          dataTable.addColumn('number', 'Pts');

          var leagueTable = [];
          $.getJSON( liveUrl , function( data ) {
              $.each( data, function( key, team ) {
		  if(team[1]<4) allGamesPlayed = false;
                  leagueTable.push( team );
              });
              dataTable.addRows(leagueTable);
              table.draw(dataTable, {showRowNumber: false, width: '100%', height: '50%'});
          });
      }



	    
jQuery(document).ready(function(){

	// Wait for google tables to appear in DOM
	var waitForEl = function(selector, callback) {
	  if (jQuery(selector).length) {
	    callback();
	  } else {
	    setTimeout(function() {
	      waitForEl(selector, callback);
	    }, 1000);
	  }
	};
			
	waitForEl('.google-visualization-table-table', function() {
		addClassesToTablesForFlags();
		checkIfFinals();
	});

	function setNewQueryStringOnRefreshButton() {
		//console.log('new string set');
		var randomStringForQueryString = Math.random().toString(36).slice(2, 7);
		var refreshButton = jQuery('#refresh');
		var newHref = '/mmm/?' + randomStringForQueryString;
		jQuery(refreshButton).attr('href', newHref);
	}
	
	function checkIfFinals() {
		if(allGamesPlayed===false)  {
			jQuery('#finals').hide();
			console.log('all games NOT played');
		} else {
			jQuery('#finals').show();

		}

		console.log('allGamesPlayed');
		console.log(allGamesPlayed);	
		
	}

	function addClassesToTablesForFlags() {
		var teamNameInTable = jQuery('.google-visualization-table-td');
		jQuery(teamNameInTable).each(function(){
			if (!jQuery(this).hasClass('google-visualization-table-type-number')) {
				jQuery(this).addClass('flag');
				var teamName = jQuery(this).html();
				var teamNameClass = teamName + '-flag';
				console.log(teamName);
				jQuery(this).addClass(teamNameClass);
			}
		});
	}
	
	setNewQueryStringOnRefreshButton();
	
});
	    	    
</script>	
</head>

<body>

<div id="wrapper">

<div class="header">
	<div class="container">
		<div class="logocontainer">
			<img src="/mmm/images/logo.png" alt="Buxton JFC" />
		</div>
		<div class="maintitle">
			<img src="/mmm/images/shieldlogo.png" />
		</div>
		<div class="refresh">
			<a id="refresh" href="/"><img src="/mmm/images/reload.svg" /></a>
		</div>
	</div>
</div>

<div class="messages">
	<div class="container">
		<p>Cake stall now open!</p>
	</div>
</div>

<div class="content">
	<div class="container">
	
		
	<div id="finals" style="display:none">
		<span class="comp-title">Final Play-Offs</span>
		<div class="table-wrapper">
			<span></span>
			<div id="table_finals"></div>
		</div>	
	</div>		
		
	<div id="fixtures">
		<span class="comp-title">Fixtures</span>
		<div class="table-wrapper">
			<span></span>
			<div id="table_fixtures"></div>
		</div>	
	</div>			
		
		
	<span class="comp-title">Mini Tournament</span>
		<div class="table-wrapper">
			<span>Group A</span>
			<div id="table_div"></div>
		</div>
		<div class="table-wrapper">
			<span>Group B</span>
			<div id="table_div_b"></div>
		</div>
			
	</div>	
</div>
</div>
</body>


<script>

</script>
	
</html>
